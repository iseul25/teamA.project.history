<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>글 수정</title>
</head>
<body>
<h1>글 수정</h1>

<!-- 에러 메시지 표시 -->
<div th:if="${errorMessage}" style="color:red;">
    <p th:text="${errorMessage}"></p>
</div>

<form th:action="@{/board/edit}" th:object="${board}" method="post" enctype="multipart/form-data">
    <!-- 글 ID는 hidden으로 보냄 -->
    <input type="hidden" th:field="*{boardId}" />

    <!-- boardType도 hidden으로 유지 -->
    <input type="hidden" th:field="*{boardType}" />

    <div>
        <label>제목</label><br/>
        <input type="text" th:field="*{title}" placeholder="제목을 입력하세요"/>
    </div>

    <div>
        <label>내용</label><br/>
        <textarea th:field="*{content}" rows="10" cols="50" placeholder="내용을 입력하세요"></textarea>
    </div>

    <!-- 현재 이미지 표시 -->
    <div th:if="${board.imgUrl != null}">
        <label>현재 이미지</label><br/>
        <img th:src="${board.imgUrl}" th:alt="${board.imgDescription}"
             style="max-width: 300px; height: auto; border: 1px solid #ddd;"/>
        <p th:if="${board.imgDescription != null}" th:text="${board.imgDescription}">이미지 설명</p>
    </div>

    <div>
        <label>이미지 변경</label><br/>
        <input type="file" name="imageFile" accept="image/*"/>
    </div>

    <div>
        <label>이미지 설명</label><br/>
        <input type="text" th:field="*{imgDescription}" placeholder="이미지 설명 (선택사항)"/>
    </div>

    <div>
        <button type="submit">수정하기</button>
        <a th:href="@{/board/list(boardType=${board.boardType})}">취소</a>
    </div>
</form>
</body>
</html>
